<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aldeia Segura Pessoas Seguras</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --green:#3a7d44;
      --green-2:#2e7d32;
      --mint:#e8f5e9;
      --line:#e7e7e7;
      --shadow:0 2px 6px rgba(0,0,0,.08);
    }
    body{margin:0;font-family:'Roboto',sans-serif;color:#333;line-height:1.6;display:flex;flex-direction:column;min-height:100vh}
    /* Header */
    header{background:#fff;display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem;box-shadow:0 2px 5px rgba(0,0,0,.1);position:sticky;top:0;z-index:1000;gap:1rem}
    header .logo{display:flex;align-items:center;gap:10px;min-width:0}
    header .logo img{width:35px;height:35px}
    header .logo h1{margin:0;color:var(--green);font-weight:700;font-size:1.1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    nav{display:flex;align-items:center;gap:1rem}
    nav ul{list-style:none;display:flex;gap:1.2rem;margin:0;padding:0}
    nav a{text-decoration:none;color:var(--green);font-weight:500;font-size:.95rem}
    #langSwitch{border:1px solid #cfe7d0;border-radius:20px;padding:.25rem .6rem;color:#2e7d32;background:#fff;font-weight:600}
    .login-btn{background:var(--green);color:#fff !important;padding:.35rem .8rem;border-radius:25px;font-weight:700;border:1px solid #2e6b39;transition:background .3s,transform .2s;text-decoration:none;font-size:.9rem}
    .login-btn:hover{background:#2e6b39;transform:scale(1.05)}

    /* Hero */
    .hero{background:url('Imagens/incendio20.jpg') center/cover no-repeat;color:#fff;height:35vh;text-align:center;display:flex;flex-direction:column;justify-content:center;position:relative}
    .hero::after{content:'';position:absolute;inset:0;background:rgba(0,0,0,.5)}
    .hero-content{position:relative;z-index:1;max-width:900px;margin:0 auto;padding:0 1rem}
    .hero h2{font-size:2rem;margin:.6rem 0 .2rem}
    .hero p{font-size:1.05rem;margin:0}

/* CTA: relatar incêndio (home) — versão limpa */
.cta-report{
  max-width:1100px;
  margin:1.5rem auto 0;        /* ↓ sem negativo = nada cortado */
  padding:0 1rem;
  position:relative;
  z-index:3;
}
.cta-report .cta-card{
  display:grid;
  grid-template-columns: 1fr auto;
  align-items:center;
  gap:1rem;
  background:#fff;
  border:1px solid #ffd8b5;
  border-radius:18px;
  padding:1.2rem 1.4rem;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
  background-image: radial-gradient(50% 60% at 10% 0%, #fff5e6 0%, rgba(255,245,230,0) 60%);
}
.cta-report h2{margin:0;color:#d84315;font-size:1.4rem}
.cta-report p{margin:.3rem 0 0;color:#6b4b3a}
.cta-report .cta-btn{
  display:inline-flex;align-items:center;gap:.55rem;
  background:#ff9800;color:#fff;text-decoration:none;font-weight:800;
  padding:.8rem 1.15rem;border-radius:999px;border:1px solid #ef6c00;
  box-shadow:0 2px 10px rgba(239,108,0,.25);
  transition:filter .15s, transform .05s
}
.cta-report .cta-btn:hover{filter:brightness(.97)}
.cta-report .cta-btn:active{transform:translateY(1px)}
@media (max-width:700px){
  .cta-report .cta-card{grid-template-columns:1fr;align-items:flex-start}
  .cta-report .cta-btn{width:100%;text-align:center}
}


    /* Cards principais */
    .sections{display:flex;gap:2rem;flex-wrap:wrap;justify-content:center;padding:3rem 2rem}
    .card{background:#fff;border-radius:10px;box-shadow:var(--shadow);overflow:hidden;max-width:300px;text-align:center;text-decoration:none;color:inherit;flex:1 1 250px;border:1px solid var(--line);transition:transform .15s,box-shadow .15s}
    .card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.1)}
    .card img{width:100%;height:170px;object-fit:contain;background:#f5f5f5}
    .card h3{margin:1rem 0;color:var(--green)}
    .card p{padding:0 1rem 1rem;font-size:.95rem}

    /* Programa */
    .programa{background:linear-gradient(180deg,#fafdfa 0%,#ffffff 100%);border-top:1px solid var(--line);border-bottom:1px solid var(--line)}
    .programa .wrap{max-width:1100px;margin:0 auto;padding:2.2rem 2rem}
    .programa h2{color:var(--green);margin:0 0 .3rem;font-size:1.6rem}
    .lead{margin:.2rem 0 1rem;color:#444}
    .prog-grid{display:grid;grid-template-columns:1fr;gap:1.4rem;align-items:start}
    .prog-col{background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);padding:1rem 1.1rem}
    .prog-col h3{color:var(--green);margin:.2rem 0 .5rem}
    .prog-col p{margin:.5rem 0}
    .bullets{margin:.4rem 0 .2rem 1rem}
    .bullets li{margin:.35rem 0}
    .kpis{display:grid;grid-template-columns:1fr 1fr;gap:.7rem;margin-top:.5rem}
    .kpi{background:#f7fbf8;border:1px solid #dfeee1;border-radius:10px;padding:.7rem .8rem}
    .kpi b{display:block;color:#1b5e20}
    .prog-cta{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:1rem}
    .btn{display:inline-block;padding:.55rem .9rem;border-radius:10px;font-weight:700;text-decoration:none;background:var(--green);color:#fff;border:1px solid #2e6b39}
    .btn.secondary{background:#fff;color:var(--green);border:1px solid #cfe7d0}
    .btn:hover{filter:brightness(.96)}

    /* Secção extra */
    .howto{max-width:1100px;margin:0 auto;padding:1rem 2rem 2.4rem}
    .howto h3{color:var(--green);margin:0 0 .6rem}
    .how-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
    .how-card{background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);padding:1rem}
    .how-card h4{margin:.2rem 0 .4rem;color:var(--green)}
    .how-card p{margin:.4rem 0}

    .mini-cta{
      display:inline-flex; align-items:center; gap:.35rem;
      margin-top:.45rem; padding:.38rem .65rem;
      background:#e8f5e9; border:1px solid #cfe7d0; border-radius:9px;
      color:#2e7d32; font-weight:700; text-decoration:none; font-size:.92rem;
      transition:filter .15s, transform .05s;
    }
    .mini-cta:hover{ filter:brightness(.97); }
    .mini-cta:active{ transform:translateY(1px); }

    /* Emergency + footer */
    .emergency{background:#e1f8e4;padding:.5rem 1rem;width:100%;margin:2rem auto;border-top:2px solid var(--green-2);border-bottom:2px solid var(--green-2);border-radius:8px;display:flex;flex-direction:column;align-items:center}
    .emergency h3{color:#c0392b;font-size:1.2rem;margin:.2rem 0}
    .emergency p{font-size:.95rem;margin:.2rem 0}
    footer{background:#fff;padding:.5rem;text-align:center;margin-top:auto;font-size:.9rem;color:#555}

    /* Responsivo */
    @media (max-width:900px){
      .hero h2{font-size:1.6rem}
      nav ul{flex-wrap:wrap;justify-content:center}
      .kpis{grid-template-columns:1fr}
      .how-grid{grid-template-columns:1fr 1fr}
    }
    @media (max-width:600px){
      .hero h2{font-size:1.35rem}
      .hero p{font-size:.95rem}
      .sections{padding:2rem 1rem;gap:1rem}
      .card img{height:130px}
      .programa .wrap{padding:1.5rem 1rem}
      .btn{width:100%;text-align:center}
      .how-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="Imagens/Aldeia.png" alt="Logo">
      <h1 data-i18n="site.title">Aldeia Segura Pessoas Seguras</h1>
    </div>
    <nav>
      <ul>
        <li><a href="index.html" data-i18n="nav.home">Início</a></li>
        <li><a href="compreender.html" data-i18n="nav.understand">Compreender</a></li>
        <li><a href="explorar.html" data-i18n="nav.explore">Explorar</a></li>
        <li><a href="reduzir.html" data-i18n="nav.reduce">Reduzir</a></li>
        <li><a href="aldeias.html" data-i18n="nav.villages">Aldeias Seguras</a></li>
        <li><a href="Incendio.html">Fogo à Vista</a></li>
        <li><a href="contacto.html" data-i18n="nav.contact">Contacto</a></li>
      </ul>
      <select id="langSwitch" aria-label="Idioma">
        <option value="pt">PT</option>
        <option value="en">EN</option>
      </select>
      <a href="login.html" class="login-btn" data-i18n="nav.login">Login / Registar</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h2 data-i18n="hero.title">Bem-vindo ao programa Aldeia Segura Pessoas Seguras</h2>
      <p data-i18n="hero.sub">Prevenir é agir antes. Evacuar é salvar-se a tempo.</p>
    </div>
  </section>

  <!-- CTA destacado para relatar incêndio -->
  <section class="cta-report" aria-labelledby="cta-report-title">
    <div class="cta-card">
      <div class="cta-text">
        <h2 id="cta-report-title" data-i18n="cta.report.title">Viu um incêndio? Relate aqui</h2>
        <p data-i18n="cta.report.desc">Marque o local no mapa, indique a data/hora e descreva o que está a ver.</p>
      </div>
      <a class="cta-btn" href="Incendio.html" data-i18n="cta.report.btn">🔥 Relatar Incêndio</a>
    </div>
  </section>

  <!-- Cards principais -->
  <section id="sections" class="sections">
    <a class="card" href="compreender.html">
      <img src="Imagens/Compreender.jpg" alt="Compreender">
      <h3 data-i18n="cards.understand.title">Compreender</h3>
      <p data-i18n="cards.understand.desc">Entenda mais relativamente aos incêndios e o impacto no território.</p>
    </a>
    <a class="card" href="explorar.html">
      <img src="Imagens/Explorar.jpg" alt="Explorar">
      <h3 data-i18n="cards.explore.title">Explorar</h3>
      <p data-i18n="cards.explore.desc">Visualize mapas interativos com níveis de risco.</p>
    </a>
    <a class="card" href="reduzir.html">
      <img src="Imagens/Reduzir.jpg" alt="Reduzir">
      <h3 data-i18n="cards.reduce.title">Reduzir</h3>
      <p data-i18n="cards.reduce.desc">Descubra medidas práticas para reduzir o risco.</p>
    </a>
    <a class="card" href="aldeias.html">
      <img src="Imagens/AldeiasPreto.png" alt="Aldeias Seguras">
      <h3 data-i18n="cards.villages.title">Aldeias Seguras</h3>
      <p data-i18n="cards.villages.desc">Conheça onde existem aldeias seguras.</p>
    </a>
  </section>

  <!-- Programa -->
  <section class="programa" id="programa">
    <div class="wrap">
      <h2 data-i18n="program.title">Programa “Aldeia Segura / Pessoas Seguras”</h2>
      <p class="lead" data-i18n="program.lead">
        Criado pela Resolução do Conselho de Ministros n.º 157-A/2017, o programa integra a reforma na prevenção e
        resposta a incêndios rurais, reforçando a segurança de pessoas e bens na interface urbano-florestal.
      </p>

      <div class="prog-grid">
        <!-- Bloco 1 -->
        <div class="prog-col">
          <h3 data-i18n="program.what.title">O que são os Programas</h3>
          <p data-i18n="program.what.p1"><b>Aldeia Segura</b> estabelece medidas estruturais para proteger aglomerados situados na interface
            urbano-florestal: criação e gestão de <i>zonas de proteção</i>, identificação de <i>pontos críticos</i>,
            e definição de <i>locais de abrigo/refúgio</i>.</p>
          <p data-i18n="program.what.p2"><b>Pessoas Seguras</b> centra-se na população: sensibilização para evitar comportamentos de risco,
            <i>medidas de autoproteção</i> e realização de <i>simulacros</i> dos planos de evacuação, em articulação
            com municípios e freguesias.</p>

          <h3 data-i18n="program.objective.title">Objetivo</h3>
          <p data-i18n="program.objective.text">Proteger pessoas e património nos aglomerados em contacto com áreas florestais, através de zonas de proteção,
            locais de abrigo/refúgio, informação ao público e preparação para evacuar ou permanecer com segurança,
            conforme a evolução do incêndio.</p>
        </div>

        <!-- Bloco 2 -->
        <div class="prog-col">
          <h3 data-i18n="program.impl.title">Implementação</h3>
          <p data-i18n="program.impl.p0">Execução ao abrigo de protocolo entre a <b>ANEPC</b>, <b>ANMP</b> e <b>ANAFRE</b>, em dois níveis:</p>
          <ul class="bullets">
            <li data-i18n="program.impl.strategic"><b>Nível estratégico (Administração Central/ANEPC):</b> referenciais nacionais, campanhas e sistemas de aviso.</li>
            <li data-i18n="program.impl.operational"><b>Nível operativo (Municípios/Freguesias):</b> medidas locais de proteção e sensibilização, tirando partido da proximidade às comunidades.</li>
          </ul>

          <div class="kpis">
            <div class="kpi">
              <b data-i18n="program.lines.title">Linhas de ação</b>
              <ul class="bullets" style="margin-top:.4rem;">
                <li data-i18n="program.lines.l1">Proteção a aglomerados</li>
                <li data-i18n="program.lines.l2">Prevenção de comportamentos de risco</li>
                <li data-i18n="program.lines.l3">Sensibilização e aviso à população</li>
                <li data-i18n="program.lines.l4">Evacuação de aglomerados</li>
                <li data-i18n="program.lines.l5">Locais de abrigo e refúgio</li>
              </ul>
            </div>
            <div class="kpi">
              <b data-i18n="program.docs.title">Documentos</b>
              <span data-i18n="program.docs.desc">Guias e referenciais de apoio à implementação.</span>
            </div>
          </div>

          <div class="prog-cta">
            <a class="btn" href="Imagens/GuiaApoio.pdf" download target="_blank" rel="noopener" data-i18n="program.cta.pt">📘 Guia de Apoio (PT)</a>
            <a class="btn secondary" href="Imagens/GuiaApoioEn.pdf" download target="_blank" rel="noopener" data-i18n="program.cta.en">📎 Guia de Apoio (EN)</a>
            <a class="btn secondary" href="https://aldeiasseguras.pt/programa/" target="_blank" rel="noopener" data-i18n="program.cta.off">🌐 Programa (site oficial)</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Secção extra -->
  <section class="howto" aria-labelledby="howto-title">
    <h3 id="howto-title" data-i18n="how.title">Como participar na tua aldeia</h3>
    <div class="how-grid">
      <div class="how-card">
        <h4 data-i18n="how.step1.t">1) Informa-te</h4>
        <p data-i18n="how.step1.d">Confirma se o teu aglomerado está no programa e conhece o Oficial de Segurança Local (OSL).</p>
      </div>
      <div class="how-card">
        <h4 data-i18n="how.step2.t">2) Contribui</h4>
        <p data-i18n="how.step2.d">Ajuda na atualização de pontos críticos, locais de abrigo/refúgio e rotas de evacuação.</p>
        <a class="mini-cta" href="aldeias.html#fichas" data-i18n="how.step2.cta">
          ➕ Adiciona mais informação sobre as aldeias
        </a>
      </div>
      <div class="how-card">
        <h4 data-i18n="how.step3.t">3) Treina</h4>
        <p data-i18n="how.step3.d">Participa nos simulacros e divulga as medidas de autoproteção aos vizinhos mais vulneráveis.</p>
      </div>
    </div>
  </section>

  <section class="emergency">
    <h3 data-i18n="emerg.title">⚠️ Em caso de emergência ⚠️</h3>
    <p data-i18n="emerg.text">Ligue imediatamente <strong>112</strong>.</p>
  </section>

  <footer>
    <span data-i18n="footer.copy">© 2025 Ruben Sousa · Todos os direitos reservados</span>
  </footer>

  <script>
    /* i18n simples */
    const LS_KEY='lang'; const langSwitch=document.getElementById('langSwitch');
    const fallback={pt:{
      "site.title":"Aldeia Segura Pessoas Seguras",
      "nav.home":"Início","nav.understand":"Compreender","nav.explore":"Explorar","nav.reduce":"Reduzir","nav.villages":"Aldeias Seguras","nav.contact":"Contacto","nav.login":"Login / Registar",
      "hero.title":"Bem-vindo ao programa Aldeia Segura Pessoas Seguras","hero.sub":"Prevenir é agir antes. Evacuar é salvar-se a tempo.",

      "cta.report.title":"Viu um incêndio? Relate aqui",
      "cta.report.desc":"Marque o local no mapa, indique a data/hora e descreva o que está a ver.",
      "cta.report.btn":"🔥 Relatar Incêndio",

      "cards.understand.title":"Compreender","cards.understand.desc":"Entenda mais relativamente aos incêndios e o impacto no território.",
      "cards.explore.title":"Explorar","cards.explore.desc":"Visualize mapas interativos com níveis de risco.",
      "cards.reduce.title":"Reduzir","cards.reduce.desc":"Descubra medidas práticas para reduzir o risco.",
      "cards.villages.title":"Aldeias Seguras","cards.villages.desc":"Conheça onde existem aldeias seguras.",
      "program.title":"Programa “Aldeia Segura / Pessoas Seguras”",
      "program.lead":"Criado pela Resolução do Conselho de Ministros n.º 157-A/2017, o programa integra a reforma na prevenção e resposta a incêndios rurais, reforçando a segurança de pessoas e bens na interface urbano-florestal.",
      "program.what.title":"O que são os Programas",
      "program.what.p1":"Aldeia Segura estabelece medidas estruturais para proteger aglomerados situados na interface urbano-florestal: criação e gestão de zonas de proteção, identificação de pontos críticos, e definição de locais de abrigo/refúgio.",
      "program.what.p2":"Pessoas Seguras centra-se na população: sensibilização para evitar comportamentos de risco, medidas de autoproteção e realização de simulacros dos planos de evacuação, em articulação com municípios e freguesias.",
      "program.objective.title":"Objetivo",
      "program.objective.text":"Proteger pessoas e património nos aglomerados em contacto com áreas florestais, através de zonas de proteção, locais de abrigo/refúgio, informação ao público e preparação para evacuar ou permanecer com segurança, conforme a evolução do incêndio.",
      "program.impl.title":"Implementação",
      "program.impl.p0":"Execução ao abrigo de protocolo entre a ANEPC, ANMP e ANAFRE, em dois níveis:",
      "program.impl.strategic":"Nível estratégico (Administração Central/ANEPC): referenciais nacionais, campanhas e sistemas de aviso.",
      "program.impl.operational":"Nível operativo (Municípios/Freguesias): medidas locais de proteção e sensibilização, tirando partido da proximidade às comunidades.",
      "program.lines.title":"Linhas de ação","program.lines.l1":"Proteção a aglomerados","program.lines.l2":"Prevenção de comportamentos de risco","program.lines.l3":"Sensibilização e aviso à população","program.lines.l4":"Evacuação de aglomerados","program.lines.l5":"Locais de abrigo e refúgio",
      "program.docs.title":"Documentos","program.docs.desc":"Guias e referenciais de apoio à implementação.",
      "program.cta.pt":"📘 Guia de Apoio (PT)","program.cta.en":"📎 Guia de Apoio (EN)","program.cta.off":"🌐 Programa (site oficial)",
      "how.title":"Como participar na tua aldeia",
      "how.step1.t":"1) Informa-te","how.step1.d":"Confirma se o teu aglomerado está no programa e conhece o Oficial de Segurança Local (OSL).",
      "how.step2.t":"2) Contribui","how.step2.d":"Ajuda na atualização de pontos críticos, locais de abrigo/refúgio e rotas de evacuação.",
      "how.step2.cta":"➕ Adiciona mais informação sobre as aldeias",
      "how.step3.t":"3) Treina","how.step3.d":"Participa nos simulacros e divulga as medidas de autoproteção aos vizinhos mais vulneráveis.",
      "emerg.title":"⚠️ Em caso de emergência ⚠️","emerg.text":"Ligue imediatamente <strong>112</strong>.",
      "footer.copy":"© 2025 Ruben Sousa · Todos os direitos reservados"
    }, en:{
      "site.title":"Safe Village Safe People",
      "nav.home":"Home","nav.understand":"Understand","nav.explore":"Explore","nav.reduce":"Reduce","nav.villages":"Safe Villages","nav.contact":"Contact","nav.login":"Login / Sign up",
      "hero.title":"Welcome to the Safe Village Safe People programme","hero.sub":"Prevention means acting early. Evacuation means leaving in time.",

      "cta.report.title":"Saw a wildfire? Report it here",
      "cta.report.desc":"Pin the location on the map, add date/time and describe what you see.",
      "cta.report.btn":"🔥 Report Wildfire",

      "cards.understand.title":"Understand","cards.understand.desc":"Learn about wildfires and their impacts on the territory.",
      "cards.explore.title":"Explore","cards.explore.desc":"Explore interactive risk maps.",
      "cards.reduce.title":"Reduce","cards.reduce.desc":"Practical measures to reduce risk.",
      "cards.villages.title":"Safe Villages","cards.villages.desc":"See where there are designated safe villages.",
      "program.title":"“Safe Village / Safe People” Programme",
      "program.lead":"Created by Council of Ministers Resolution No. 157-A/2017, the programme strengthens prevention and response to rural fires at the wildland-urban interface.",
      "program.what.title":"What are these Programmes",
      "program.what.p1":"Safe Village focuses on structural measures to protect settlements at the WUI: protection zones, critical points and designated shelter/refuge sites.",
      "program.what.p2":"Safe People focuses on the population: risk-aware behaviour, self-protection measures and evacuation drills with local authorities.",
      "program.objective.title":"Objective",
      "program.objective.text":"Protect people and assets in WUI settlements through protection zones, shelter/refuge sites, public information and preparedness to evacuate or shelter safely.",
      "program.impl.title":"Implementation",
      "program.impl.p0":"Implemented under a protocol between ANEPC, ANMP and ANAFRE at two levels:",
      "program.impl.strategic":"Strategic level (Central Administration/ANEPC): national guidelines, campaigns and alert systems.",
      "program.impl.operational":"Operational level (Municipalities/Parishes): local protective and awareness measures with community engagement.",
      "program.lines.title":"Lines of action","program.lines.l1":"Settlement protection","program.lines.l2":"Risk behaviour prevention","program.lines.l3":"Public awareness and alerts","program.lines.l4":"Evacuation of settlements","program.lines.l5":"Shelter and refuge sites",
      "program.docs.title":"Documents","program.docs.desc":"Support guides and national references.",
      "program.cta.pt":"📘 Support Guide (PT)","program.cta.en":"📎 Support Guide (EN)","program.cta.off":"🌐 Programme (official site)",
      "how.title":"How to get involved in your village",
      "how.step1.t":"1) Get informed","how.step1.d":"Check if your settlement is covered and meet your Local Safety Officer (OSL).",
      "how.step2.t":"2) Contribute","how.step2.d":"Help update critical points, shelter/refuge sites and evacuation routes.",
      "how.step2.cta":"➕ Add more information about the villages",
      "how.step3.t":"3) Train","how.step3.d":"Join the drills and share self-protection with vulnerable neighbours.",
      "emerg.title":"⚠️ In case of emergency ⚠️","emerg.text":"Call <strong>112</strong> immediately.",
      "footer.copy":"© 2025 Ruben Sousa · All rights reserved"
    }};

    const urlLang=new URLSearchParams(location.search).get('lang');
    const initial=(localStorage.getItem(LS_KEY)||urlLang||'pt').toLowerCase();
    document.getElementById('langSwitch').value=initial;

    async function fetchDict(l){
      try{
        const r=await fetch(`i18n/${l}.json`,{cache:'no-cache'});
        if(!r.ok) throw 0;
        return await r.json();
      }catch(_){ return fallback[l]||fallback.pt; }
    }
    function applyI18n(dict){
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k=el.dataset.i18n;
        if(dict[k]!=null) el.innerHTML=dict[k];
      });
      document.documentElement.lang=(dict===fallback.en?'en':'pt');
    }
    async function setLang(l){
      const d=await fetchDict(l);
      applyI18n(d);
      localStorage.setItem(LS_KEY,l);
    }
    document.getElementById('langSwitch').addEventListener('change',e=>setLang(e.target.value));
    setLang(initial);
  </script>
</body>
</html>
